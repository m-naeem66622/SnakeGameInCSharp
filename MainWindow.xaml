<Window x:Class="SnakeGame.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Neon Snake"
        Height="840"
        Width="1320"
        MinHeight="720"
        MinWidth="1100"
        WindowStartupLocation="CenterScreen"
        Background="#050710"
        PreviewKeyDown="Window_KeyDown">
    <Window.Resources>
        <LinearGradientBrush x:Key="AppBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#050B16" Offset="0" />
            <GradientStop Color="#061126" Offset="0.55" />
            <GradientStop Color="#04070F" Offset="1" />
        </LinearGradientBrush>
        <LinearGradientBrush x:Key="PanelBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#111B2F" Offset="0" />
            <GradientStop Color="#0B1222" Offset="1" />
        </LinearGradientBrush>
        <SolidColorBrush x:Key="CardBackground" Color="#121B2E" />
        <SolidColorBrush x:Key="AccentBrush" Color="#66F7D5" />
        <SolidColorBrush x:Key="AccentBrushSecondary" Color="#8AA5FF" />
        <SolidColorBrush x:Key="WarningBrush" Color="#FF8F6F" />
        <DropShadowEffect x:Key="CardShadow" BlurRadius="32" ShadowDepth="0" Color="#800B1325" Opacity="0.6" />
        <BlurEffect x:Key="SoftGlow" Radius="40" />
        <Style x:Key="CardBorderStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="24" />
            <Setter Property="Background" Value="{StaticResource PanelBackground}" />
            <Setter Property="Padding" Value="28" />
            <Setter Property="Effect" Value="{StaticResource CardShadow}" />
        </Style>
        <Style x:Key="StatCardStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="14" />
            <Setter Property="Background" Value="#11182B" />
            <Setter Property="Padding" Value="14" />
            <Setter Property="MinWidth" Value="150" />
            <Setter Property="Effect" Value="{StaticResource CardShadow}" />
        </Style>
        <Style TargetType="TextBlock" x:Key="SectionLabel">
            <Setter Property="Foreground" Value="#90A4D4" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
        </Style>
        <Style TargetType="Button">
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Background" Value="#1C2740" />
            <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="14"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#28375A" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#15213B" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource AppBackground}">
        <Grid>
            <Ellipse Width="520" Height="520" Fill="#441B5A" HorizontalAlignment="Left" Margin="-120,-220,0,0" Opacity="0.35" Effect="{StaticResource SoftGlow}" />
            <Ellipse Width="420" Height="420" Fill="#144253" HorizontalAlignment="Right" Margin="0,0,-120,-60" Opacity="0.28" Effect="{StaticResource SoftGlow}" />
        </Grid>

        <Grid x:Name="ResponsiveLayoutGrid" Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="PrimaryRow" Height="*" />
                    <RowDefinition x:Name="SidebarRow" Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="PrimaryColumn" Width="3*" />
                    <ColumnDefinition x:Name="SidebarColumn" Width="1.6*" />
                </Grid.ColumnDefinitions>

            <!-- Gameplay Surface -->
            <Border Grid.Row="0"
                    Grid.Column="0"
                    MinHeight="420"
                    Style="{StaticResource CardBorderStyle}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Neon Snake"
                                       Foreground="White"
                                       FontSize="28"
                                       FontWeight="Bold" />
                            <TextBlock Text="Stay alive, chase neon, climb the leaderboard."
                                       Foreground="#7F8AB5"
                                       FontSize="13"
                                       Margin="0,6,0,0" />
                        </StackPanel>
                        <Border Grid.Column="1"
                                Background="#122038"
                                CornerRadius="999"
                                Padding="14,6"
                                HorizontalAlignment="Right">
                            <TextBlock Text="Live Session"
                                       Foreground="{StaticResource AccentBrush}"
                                       FontSize="13"
                                       FontWeight="SemiBold" />
                        </Border>
                    </Grid>

                    <!-- Stats -->
                    <WrapPanel Grid.Row="1" Margin="0,20,0,24" ItemHeight="Auto" ItemWidth="220">
                        <Border Style="{StaticResource StatCardStyle}" Margin="0,0,16,16">
                            <StackPanel>
                                <TextBlock Text="Score"
                                           Style="{StaticResource SectionLabel}" />
                                <TextBlock x:Name="ScoreText"
                                           Text="0"
                                           Foreground="White"
                                           FontSize="26"
                                           FontWeight="Bold"
                                           Margin="0,4,0,0" />
                                <TextBlock x:Name="BestScoreText"
                                           Text="Best: 0"
                                           Foreground="#7F8AB5"
                                           FontSize="12"
                                           Margin="0,8,0,0" />
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource StatCardStyle}" Margin="0,0,16,16">
                            <StackPanel>
                                <TextBlock Text="Level"
                                           Style="{StaticResource SectionLabel}" />
                                <TextBlock x:Name="LevelText"
                                           Text="1"
                                           Foreground="White"
                                           FontSize="26"
                                           FontWeight="Bold"
                                           Margin="0,4,0,0" />
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource StatCardStyle}" Margin="0,0,16,16">
                            <StackPanel>
                                <TextBlock Text="Speed"
                                           Style="{StaticResource SectionLabel}" />
                                <TextBlock x:Name="SpeedText"
                                           Text="Normal"
                                           Foreground="White"
                                           FontSize="26"
                                           FontWeight="Bold"
                                           Margin="0,4,0,0" />
                            </StackPanel>
                        </Border>
                    </WrapPanel>

                    <!-- Game Canvas -->
                    <Border Grid.Row="2" Background="#050C18" CornerRadius="20" Padding="16" MinHeight="360">
                        <Grid>
                            <Canvas x:Name="GameCanvas" Background="#040A12" ClipToBounds="True" MinHeight="320" SnapsToDevicePixels="True" />
                            <Rectangle Stroke="#15233B"
                                       StrokeDashArray="0,18"
                                       RadiusX="18"
                                       RadiusY="18"
                                       IsHitTestVisible="False"
                                       Margin="8"
                                       Opacity="0.5" />
                            <Grid x:Name="GameOverOverlay"
                                  Visibility="Collapsed"
                                  Background="#C9050C18">
                                <StackPanel HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Width="280">
                                    <TextBlock Text="Game Over"
                                               Foreground="White"
                                               FontSize="32"
                                               FontWeight="Bold"
                                               HorizontalAlignment="Center" />
                                    <TextBlock x:Name="GameOverScoreText"
                                               Text="Score: 0"
                                               Foreground="#CFE9FF"
                                               FontSize="18"
                                               Margin="0,12,0,0"
                                               HorizontalAlignment="Center" />
                                    <Button Content="Play Again"
                                            Width="160"
                                            Margin="0,24,0,0"
                                            HorizontalAlignment="Center"
                                            Click="PlayAgainButton_Click" />
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Border>

                    <!-- Footer Tip -->
                    <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,28,0,0" VerticalAlignment="Center">
                        <Border Background="#122034" CornerRadius="999" Padding="12,6">
                            <TextBlock Text="Tip: Bonuses give x5 points and fade fast."
                                       Foreground="#B2C7FF"
                                       FontSize="12" />
                        </Border>
                        <TextBlock Text="Press Space to pause instantly."
                                   Foreground="#7F8AB5"
                                   FontSize="12"
                                   Margin="18,0,0,0" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Command & Info Panel -->
            <ScrollViewer x:Name="SidebarHost"
                          Grid.Row="0"
                          Grid.Column="1"
                          Margin="24,0,0,0"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                <StackPanel x:Name="SidebarPanel">
                <Border Style="{StaticResource CardBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Session Controls"
                                   Foreground="White"
                                   FontSize="20"
                                   FontWeight="SemiBold" />
                        <TextBlock Text="Manage the run, reset when ready."
                                   Style="{StaticResource SectionLabel}"
                                   Margin="0,4,0,20" />

                        <WrapPanel ItemHeight="Auto">
                            <Button x:Name="PlayPauseButton"
                                    Content="Play"
                                    Width="140"
                                    Margin="0,0,12,12"
                                    Background="{StaticResource AccentBrush}"
                                    Foreground="#04121F"
                                    BorderBrush="{StaticResource AccentBrush}"
                                    Click="PlayPauseButton_Click" />
                            <Button x:Name="ResetButton"
                                    Content="Reset"
                                    Width="110"
                                    Margin="0,0,12,12"
                                    Background="#1B1624"
                                    BorderBrush="{StaticResource WarningBrush}"
                                    Click="ResetButton_Click" />
                            <Button x:Name="ScoreHistoryButton"
                                    Content="History"
                                    Width="110"
                                    Margin="0,0,12,12"
                                    Background="#131C2C"
                                    BorderBrush="{StaticResource AccentBrushSecondary}"
                                    Click="ScoreHistoryButton_Click" />
                        </WrapPanel>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardBorderStyle}" Margin="0,24,0,0">
                    <StackPanel>
                        <TextBlock Text="Controls"
                                   Foreground="White"
                                   FontSize="20"
                                   FontWeight="SemiBold" />
                        <StackPanel Margin="0,16,0,0">
                            <TextBlock Text="Move"
                                       Style="{StaticResource SectionLabel}" />
                            <TextBlock Text="Arrow keys or WASD"
                                       Foreground="White"
                                       FontSize="14"
                                       Margin="0,4,0,0" />
                        </StackPanel>
                        <StackPanel Margin="0,16,0,0">
                            <TextBlock Text="Pause"
                                       Style="{StaticResource SectionLabel}" />
                            <TextBlock Text="Spacebar toggles pause instantly"
                                       Foreground="White"
                                       FontSize="14"
                                       Margin="0,4,0,0" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardBorderStyle}" Margin="0,24,0,0">
                    <StackPanel>
                        <TextBlock Text="Legend"
                                   Foreground="White"
                                   FontSize="20"
                                   FontWeight="SemiBold" />

                        <StackPanel Orientation="Horizontal" Margin="0,18,0,0" VerticalAlignment="Center">
                            <Rectangle Width="20" Height="20" Fill="#3EE3A7" RadiusX="6" RadiusY="6" />
                            <TextBlock Text="Food block (+1 length)"
                                       Foreground="White"
                                       Margin="12,0,0,0"
                                       FontSize="14" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,12,0,0" VerticalAlignment="Center">
                            <Rectangle Width="20" Height="20" Fill="#FFD166" RadiusX="6" RadiusY="6" />
                            <TextBlock Text="Bonus orb (5x score window)"
                                       Foreground="White"
                                       Margin="12,0,0,0"
                                       FontSize="14" />
                        </StackPanel>
                    </StackPanel>
                </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
